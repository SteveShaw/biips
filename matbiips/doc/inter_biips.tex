\documentclass[11pt]{article}
\usepackage[english]{babel}
\usepackage[latin1]{inputenc}
\usepackage[dvips]{graphicx}
\usepackage{pstricks}
\usepackage{epsfig}
\usepackage{a4wide}

\usepackage{listings}
\usepackage{relsize}
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.8,0.8,0.8}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\newcommand{\biips}{{\bf Biips\ }{}}
\newcommand{\matlab}{{\bf MATLAB\ }{}}
\lstset{ %
  language=matlab,
  framerule=0pt,
  basicstyle=\relsize{-2}\ttfamily,  % the size of the fonts that are used for the code
  backgroundcolor=\color{gray},  % choose the background color. You must add \usepackage{color}
  showspaces=false,               % show spaces adding particular underscores
  showstringspaces=false,         % underline spaces within strings
  showtabs=false,                 % show tabs within strings adding particular underscores
  %frame=single,                   % adds a frame around the code
  rulecolor=\color{black},        % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. commens (green here))
  breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
  keywordstyle=\color{blue},      % keyword style
  commentstyle=\color{dkgreen},   % comment style
  stringstyle=\color{mauve}
}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

\section{make\_console}
 \begin{lstlisting}
   p = inter_biips('make_console')
 \end{lstlisting}
   
   \texttt{MAKE\_CONSOLE}  creates a new console and returns the id of the console in the global table of console. It
   is strongly recommended to store the number of the console in a variable, to be able later to communicate with Biips trough that
   console

\section{clear\_console}

 \begin{lstlisting}
   inter_biips('clear_console', id)
 \end{lstlisting}

  \texttt{CLEAR\_CONSOLE} suppress the console with the given \texttt{id} and free the memory associated

\section{clear\_all\_console}
 
 \begin{lstlisting}
   inter_biips('clear_all_console')
 \end{lstlisting}

  \texttt{CLEAR\_ALL\_CONSOLE} suppress all the consoles and free memory

\section{check\_model}

 \begin{lstlisting}
   inter_biips('check_model', id, filename)
 \end{lstlisting}
  
 \texttt{CHECK\_MODEL} verifies that the model given in the \texttt{filename} (with extension .bug) is consistent and associate it to the console \texttt{id}

\section{compile\_model}

 \begin{lstlisting}
   inter_biips('compile_model', id, vars, sample_data, seed) 
 \end{lstlisting}
   \begin{description}
   \setlength{\baselineskip}{0.1\baselineskip}
     \item[\texttt{id}] : the number of the console
     \item[\texttt{vars}] : a struct containing variables as fields, and the values in the model as values.
     \item[\texttt{sample\_data}] : a boolean flag indicating if data is given or sampled following the \texttt{data} section in the bug file
     \item[\texttt{seed}] : value of the seed used for random number generation
   
   \end{description}

   \texttt{COMPILE\_MODEL} compile the model previously furnished by the \texttt{CHECK\_MODEL} function. You can set up values of variables of 
   the model.


\section{get\_data}
   
 \begin{lstlisting}
   data = inter_biips('get_data', id) 
 \end{lstlisting}
 
  \texttt{GET\_DATA} retrieves all the data linked to a consoled with \texttt{id} and put it in the return value.


\section{load\_module}
 
 \begin{lstlisting}
   ok = inter_biips('load_module', name)
 \end{lstlisting}

  \texttt{LOAD\_MODULE} load the module \texttt{name} in Biips. Currently, it only works with \texttt{'basemod'} module. A 
  boolean flag is return if the operation is successful.

\section{verbosity}
 
 \begin{lstlisting}
  inter_biips('verbosity', level) 
 \end{lstlisting}

  \texttt{VERBOSITY} set the verbosity level of biips. \texttt{level} must belong to the set $\{0,1,2\}$

\section{get\_variables\_names}

 \begin{lstlisting}
  names = inter_biips('get_variable_names', id)
 \end{lstlisting}

 \texttt{GET\_VARIABLE\_NAMES} retrieves the names of variables of current model of the console \texttt{id} . the return value \texttt{names}
 is a cell of strings containing the names of variables

\section{set\_default\_monitors}

 \begin{lstlisting}
  names = inter_biips('set_default_monitors', id)
 \end{lstlisting}

 \texttt{SET\_DEFAULT\_MONITORS} set up the default filters for backward smoothing step for console model \texttt{id}

\section{set\_filter\_monitors}
 \begin{lstlisting}
  inter_biips('set_filter_monitors', id, monitored_vars, lower, upper )
 \end{lstlisting}
   
   \begin{description}
   \setlength{\baselineskip}{0.1\baselineskip}
     \item[\texttt{id}] : the number of the console
     \item[\texttt{monitored\_vars}] : cell containing strings for variables to be monitored
     \item[\texttt{lower}] : cell containing lower bound for range monitoring
     \item[\texttt{upper}] : cell containing upper bound for range monitoring 
   
   \end{description}

   \texttt{SET\_FILTER\_MONITORS} sets which variables must be monitored in the model. For instance to monitor x[1:10,1], one can use
 \begin{lstlisting}
  inter_biips('set_filter_monitors', id, {'x'} ,  {1,1} , {10,1} )
 \end{lstlisting}

\section{set\_gen\_tree\_smooth\_monitors}

 \begin{lstlisting}
  inter_biips('set_gen_tree_smooth_monitors', id, smooth_monitored_vars, lower, upper )
 \end{lstlisting}

   \begin{description}
   \setlength{\baselineskip}{0.1\baselineskip}
     \item[\texttt{id}] : the number of the console
     \item[\texttt{smooth\_monitored\_vars}] : cell containing strings for variables to be smooth monitored
     \item[\texttt{lower}] : cell containing lower bound for range smooth monitoring
     \item[\texttt{upper}] : cell containing upper bound for range smooth monitoring 
   
   \end{description}

   \texttt{SET\_GEN\_TREE\_SMOOTH\_MONITORS} sets which variables must be smoothly monitored in the model. For instance to smoothly monitor x[1:10,1], one can use
 \begin{lstlisting}
  inter_biips('set_gen_tree_smooth_monitors', id, {'x'} ,  {1,1} , {10,1} )
 \end{lstlisting}


\section{set\_backward\_smooth\_monitors}

 \begin{lstlisting}
  inter_biips('set_backward_smooth_monitors', id, bw_smooth_monitored_vars, lower, upper )
 \end{lstlisting}

   \begin{description}
     \item[\texttt{id}] : the number of the console
     \item[\texttt{bw\_smooth\_monitored\_vars}] : cell containing strings for variables to be backward smoothly monitored
     \item[\texttt{lower}] : cell containing lower bound for range smooth monitoring
     \item[\texttt{upper}] : cell containing upper bound for range smooth monitoring 
   
   \end{description}

   \texttt{SET\_BACKWARD\_SMOOTH\_MONITORS} sets which variables must be backward smoothly monitored in the model. For instance to backward smoothly monitor x[1:10,1], one can use
 \begin{lstlisting}
  inter_biips('set_backward_smooth_monitors', id, {'x'} ,  {1,1} , {10,1} )
 \end{lstlisting}

\section{build\_smc\_sampler}

 \begin{lstlisting}
  inter_biips('build_smc_sampler', id, prior_flag)
 \end{lstlisting}
  \texttt{BUILD\_SMC\_SAMPLER} builds the smc sampler associated to \texttt{id} console setting up possibly the prior method for sampling (\texttt{prior\_flag})

\section{is\_sampler\_built}

 \begin{lstlisting}
  ok = inter_biips('is_sampler_built', id)
 \end{lstlisting}
  \texttt{IS\_SAMPLER\_BUILT} returns the \texttt{ok} flag to check if sampler is built
\section{run\_smc\_sampler}

 \begin{lstlisting}
   ok = inter_biips('run_smc_sampler', id, nb_part, seed, ess_threshold, resample_type)
 \end{lstlisting}
 
   \begin{description}
     \item[\texttt{id}] : the number of the console
     \item[\texttt{nb\_part}] : number of particles 
     \item[\texttt{seed}] : seed for random number generator
     \item[\texttt{ess\_threshold}] : threshold value for the Effective Sample Size
     \item[\texttt{resample\_type}] : string belonging to \texttt{ 'stratified', 'systematic', 'residual', 'multinomial' } 
   
   \end{description}

  \texttt{RUN\_SMC\_SAMPLER} run the SMC with \texttt{nb\_part} particules. One can select the resampling method using \texttt{resample\_type}
  \section{get\_log\_norm\_const}

 \begin{lstlisting}
  log_norm = inter_biips('get_log_norm_const', id )
 \end{lstlisting}
 \texttt{GET\_LOG\_NORM\_CONST} returns the log normalizing constant relative to the console \texttt{id}

 \section{get\_filter\_monitors}

 \begin{lstlisting}
  filter_monitors = inter_biips('get_filter_monitor', id )
 \end{lstlisting}

 \texttt{GET\_FILTER\_MONITORS} dumps the filters monitors into the \texttt{filter\_monitors} double nested struct
 
 \section{get\_gen\_tree\_smooth\_monitors}
 
 \begin{lstlisting}
  smooth_monitors = inter_biips('get_gen_tree_smooth_monitors', id )
 \end{lstlisting}
 
 \texttt{GET\_GEN\_TREE\_SMOOTH\_MONITORS} dumps the filters monitors into the \texttt{smooth\_monitors} double nested struct

\end{document}
